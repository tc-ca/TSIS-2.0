!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.ES6Promise=e()}(this,function(){"use strict";function t(t){return"function"==typeof t||"object"==typeof t&&null!==t}function e(t){return"function"==typeof t}function n(){return void 0!==j?function(){j(i)}:r()}function r(){var t=setTimeout;return function(){return t(i,1)}}function i(){for(var t=0;t<X;t+=2)(0,L[t])(L[t+1]),L[t]=void 0,L[t+1]=void 0;X=0}function o(t,e){var n=arguments,r=this,i=new this.constructor(u);void 0===i[G]&&A(i);var o=r._state;return o?function(){var t=n[o-1];W(function(){return R(o,i,t,r._result)})}():_(r,i,t,e),i}function s(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var n=new e(u);return y(n,t),n}function u(){}function a(){return new TypeError("You cannot resolve a promise with itself")}function c(){return new TypeError("A promises callback cannot return that same promise.")}function l(t){try{return t.then}catch(t){return z.error=t,z}}function f(t,e,n,r){try{t.call(e,n,r)}catch(t){return t}}function h(t,e,n){W(function(t){var r=!1,i=f(n,e,function(n){r||(r=!0,e!==n?y(t,n):v(t,n))},function(e){r||(r=!0,m(t,e))},"Settle: "+(t._label||" unknown promise"));!r&&i&&(r=!0,m(t,i))},t)}function d(t,e){e._state===H?v(t,e._result):e._state===V?m(t,e._result):_(e,void 0,function(e){return y(t,e)},function(e){return m(t,e)})}function p(t,n,r){n.constructor===t.constructor&&r===o&&n.constructor.resolve===s?d(t,n):r===z?m(t,z.error):void 0===r?v(t,n):e(r)?h(t,n,r):v(t,n)}function y(e,n){e===n?m(e,a()):t(n)?p(e,n,l(n)):v(e,n)}function g(t){t._onerror&&t._onerror(t._result),S(t)}function v(t,e){t._state===K&&(t._result=e,t._state=H,0!==t._subscribers.length&&W(S,t))}function m(t,e){t._state===K&&(t._state=V,t._result=e,W(g,t))}function _(t,e,n,r){var i=t._subscribers,o=i.length;t._onerror=null,i[o]=e,i[o+H]=n,i[o+V]=r,0===o&&t._state&&W(S,t)}function S(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,i=void 0,o=t._result,s=0;s<e.length;s+=3)r=e[s],i=e[s+n],r?R(n,r,i,o):i(o);t._subscribers.length=0}}function b(){this.error=null}function w(t,e){try{return t(e)}catch(t){return J.error=t,J}}function R(t,n,r,i){var o=e(r),s=void 0,u=void 0,a=void 0,l=void 0;if(o){if((s=w(r,i))===J?(l=!0,u=s.error,s=null):a=!0,n===s)return void m(n,c())}else s=i,a=!0;n._state!==K||(o&&a?y(n,s):l?m(n,u):t===H?v(n,s):t===V&&m(n,s))}function x(t,e){try{e(function(e){y(t,e)},function(e){m(t,e)})}catch(e){m(t,e)}}function k(){return Z++}function A(t){t[G]=Z++,t._state=void 0,t._result=void 0,t._subscribers=[]}function C(t,e){this._instanceConstructor=t,this.promise=new t(u),this.promise[G]||A(this.promise),N(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?v(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&v(this.promise,this._result))):m(this.promise,Q())}function Q(){return new Error("Array Methods must be provided an Array")}function O(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function T(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function E(t){this[G]=k(),this._result=this._state=void 0,this._subscribers=[],u!==t&&("function"!=typeof t&&O(),this instanceof E?x(this,t):T())}var D=void 0,N=D=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},X=0,j=void 0,P=void 0,W=function(t,e){L[X]=t,L[X+1]=e,2===(X+=2)&&(P?P(i):I())},$="undefined"!=typeof window?window:void 0,U=$||{},F=U.MutationObserver||U.WebKitMutationObserver,q="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),M="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,L=new Array(1e3),I=void 0;I=q?function(){return process.nextTick(i)}:F?function(){var t=0,e=new F(i),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}():M?function(){var t=new MessageChannel;return t.port1.onmessage=i,function(){return t.port2.postMessage(0)}}():void 0===$&&"function"==typeof require?function(){try{var t=require("vertx");return j=t.runOnLoop||t.runOnContext,n()}catch(t){return r()}}():r();var G=Math.random().toString(36).substring(16),K=void 0,H=1,V=2,z=new b,J=new b,Z=0;return C.prototype._enumerate=function(){for(var t=this.length,e=this._input,n=0;this._state===K&&n<t;n++)this._eachEntry(e[n],n)},C.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===s){var i=l(t);if(i===o&&t._state!==K)this._settledAt(t._state,e,t._result);else if("function"!=typeof i)this._remaining--,this._result[e]=t;else if(n===E){var a=new n(u);p(a,t,i),this._willSettleAt(a,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},C.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===K&&(this._remaining--,t===V?m(r,n):this._result[e]=n),0===this._remaining&&v(r,this._result)},C.prototype._willSettleAt=function(t,e){var n=this;_(t,void 0,function(t){return n._settledAt(H,e,t)},function(t){return n._settledAt(V,e,t)})},E.all=function(t){return new C(this,t).promise},E.race=function(t){var e=this;return new e(N(t)?function(n,r){for(var i=t.length,o=0;o<i;o++)e.resolve(t[o]).then(n,r)}:function(t,e){return e(new TypeError("You must pass an array to race."))})},E.resolve=s,E.reject=function(t){var e=new this(u);return m(e,t),e},E._setScheduler=function(t){P=t},E._setAsap=function(t){W=t},E._asap=W,E.prototype={constructor:E,then:o,catch:function(t){return this.then(null,t)}},E.polyfill=function(){var t=void 0;if("undefined"!=typeof global)t=global;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var n=null;try{n=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===n&&!e.cast)return}t.Promise=E},E.Promise=E,E}),ES6Promise.polyfill();var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),XrmQuery;!function(t){function e(t,e,n,r,i,o,s){void 0===i&&(i=function(){}),void 0===s&&(s=!1);var u=new XMLHttpRequest;u.open(t,e,!s),u.setRequestHeader("Accept","application/json"),u.setRequestHeader("Content-Type","application/json; charset=utf-8"),u.setRequestHeader("OData-MaxVersion","4.0"),u.setRequestHeader("OData-Version","4.0"),o&&o(u),u.onreadystatechange=function(){4==this.readyState&&(u.onreadystatechange=null,200==this.status||204==this.status?r(this):i(new Error(this.response)))},u.send(n)}function n(t,n,i,o,s,u,a){e(t,r(XQW.getApiUrl()+n),i,o,s,u,a)}function r(t){return t.replace(/ /g,"%20")}t.retrieve=function(t,e){return XQW.RetrieveRecord.Get(t,e)},t.retrieveMultiple=function(t){return XQW.RetrieveMultipleRecords.Get(t)},t.retrieveRelated=function(t,e,n){return XQW.RetrieveRecord.Related(t,e,n)},t.retrieveRelatedMultiple=function(t,e,n){return XQW.RetrieveMultipleRecords.Related(t,e,n)},t.create=function(t,e){return new XQW.CreateRecord(t,e)},t.update=function(t,e,n){return new XQW.UpdateRecord(t,e,n)},t.associateSingle=function(t,e,n,r,i){return new XQW.AssociateRecordSingle(t,e,n,r,i)},t.associateCollection=function(t,e,n,r,i){return new XQW.AssociateRecordCollection(t,e,n,r,i)},t.disassociateSingle=function(t,e,n){return XQW.DisassociateRecord.Single(t,e,n)},t.disassociateCollection=function(t,e,n,r){return XQW.DisassociateRecord.Collection(t,e,n,r)},t.deleteRecord=function(t,e){return new XQW.DeleteRecord(t,e)},t.setApiUrl=function(t){XQW.ApiUrl=t},t.setApiVersion=function(t){XQW.ApiUrl=XQW.getDefaultUrl(t)},t.request=e,t.sendRequest=n,t.promiseRequest=function(t,e,r,i){return XQW.promisifyCallback(function(o,s){return n(t,e,r,o,s,i)})}}(XrmQuery||(XrmQuery={}));var Filter;!function(t){function e(t){return null==t?"null":"string"==typeof t?"'"+s(t)+"'":s(t instanceof Date?t.toISOString():t.toString())}function n(t,n,r){return e(t)+" "+n+" "+e(r)}function r(t,n,r){return t+"("+e(n)+", "+e(r)+")"}function i(t,e,n){return"("+t+" "+e+" "+n+")"}function o(t,e){var n=t.pop();return void 0===n?"":t.reduceRight(function(t,n){return i(n,e,t)},n)}function s(t){return encodeURI(t).replace(/'/g,"''").replace(/\+/g,"%2B").replace(/\//g,"%2F").replace(/\?/g,"%3F").replace(/#/g,"%23").replace(/&/g,"%26")}t.equals=function(t,e){return n(t,"eq",e)},t.notEquals=function(t,e){return n(t,"ne",e)},t.greaterThan=function(t,e){return n(t,"gt",e)},t.greaterThanOrEqual=function(t,e){return n(t,"ge",e)},t.lessThan=function(t,e){return n(t,"lt",e)},t.lessThanOrEqual=function(t,e){return n(t,"le",e)},t.and=function(t,e){return i(t,"and",e)},t.or=function(t,e){return i(t,"or",e)},t.not=function(t){return"not "+t},t.ands=function(t){return o(t,"and")},t.ors=function(t){return o(t,"or")},t.startsWith=function(t,e){return r("startswith",t,e)},t.contains=function(t,e){return r("contains",t,e)},t.endsWith=function(t,e){return r("endswith",t,e)},t.makeGuid=function(t){return XQW.makeTag(XQW.stripGUID(t))}}(Filter||(Filter={}));var XQW;!function(t){function e(t,e){return t.substr(-e.length)==e}function n(t,e){return t.substr(0,e.length)==e}function r(t,r){if(D.test(r))return new Date(r);var i=t,o=e(i,S),s=e(i,w),u=e(i,R);if(o?i=i.substr(0,i.length-S.length):s?i=i.substr(0,i.length-w.length):u&&(i=i.substr(0,i.length-R.length)),n(i,"_")&&e(i,"_value")?(i=i.substr(1,i.length-7),i+=o?Q:s?O:u?T:C):o&&(i+=Q),i==t)return r;this[i]=r}function i(t){return a("{",t)&&e(t,"}")?t.substring(1,t.length-1):t}function o(t){return JSON.parse(t.response,r)}function s(t){return t.length>0&&"string"==typeof t[0]}function u(t){if(!Promise)throw new Error("Promises are not natively supported in this browser. Add a polyfill to use it.");return new Promise(function(e,n){t(e,n)})}function a(t,e){return 0===e.lastIndexOf(t,0)}function c(t,e){return t(h(t,e))}function l(t){return new RegExp("\\b"+t+"\\.([a-zA-Z_$][0-9a-zA-Z_$]*)(\\.([a-zA-Z_$][0-9a-zA-Z_$]*))?","g")}function f(t){var e=t.toString().match(G);if(!e)throw new Error("XrmQuery: Unable to properly parse function: "+t.toString());return{arg:e[1],body:e[2]}}function h(e,n){for(var r,i=f(e),o=l(i.arg),s=n||function(t){return t},u={};null!=(r=o.exec(i.body));)u[r[1]]||(u[r[1]]=t.makeTag(s(r[1]))),r[3]&&(u[r[1]][r[3]]=t.makeTag(r[1]+"/"+s(r[3])));return u}function d(t){return p()+"/api/data/v"+t+"/"}function p(){try{if(GetGlobalContext&&GetGlobalContext().getClientUrl)return GetGlobalContext().getClientUrl()}catch(t){}try{if(Xrm&&Xrm.Page&&Xrm.Page.context)return Xrm.Page.context.getClientUrl()}catch(t){}throw new Error("Context is not available.")}function y(t){var e=t.match(/_guid$/);return e?"_"+t.substr(0,e.index)+"_value":t}function g(t){return v(t).map(function(t){return t.toString()})}function v(t){return c(t,y)}function m(t){if(t instanceof Date)return t;if("string"==typeof t&&a("{",t)&&e(t,"}"))return t.substring(1,t.length-1);if(t instanceof Array){var n=[];return t.forEach(function(t,e){return n[e]=m(t)}),n}if(t instanceof Object){var r={};return Object.keys(t).forEach(function(e){return _(e,m(t[e]),r)}),r}return t}function _(t,e,n){if(t.indexOf(k)>=0){if((r=t.indexOf(k))>=0){i=t.substr(r+k.length);n[t.substr(0,r)+"@odata.bind"]="/"+i+"("+e+")"}}else if(t.indexOf(A)>=0){var r=t.indexOf(A);if(r>=0){var i=t.substr(r+A.length),o=d(K);n[t.substr(0,r)+"@odata.id"]=""+o+i+"("+e+")"}}else n[t]=e}var S="@OData.Community.Display.V1.FormattedValue",b={type:"Prefer",value:'odata.include-annotations="OData.Community.Display.V1.FormattedValue"'},w="@Microsoft.Dynamics.CRM.lookuplogicalname",R="@Microsoft.Dynamics.CRM.associatednavigationproperty",x={type:"Prefer",value:'odata.include-annotations="*"'},k="_bind$",A="_id$",C="_guid",Q="_formatted",O="_lookuplogicalname",T="_navigationproperty",E=function(t){return{type:"Prefer",value:"odata.maxpagesize="+t}};t.makeTag=function(t){return{__str:t,toString:function(){return this.__str}}};var D=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/;t.stripGUID=i,t.promisifyCallback=u;var N=function(){function t(t,e,n){var r=this;this.toReturn=t,this.successCallback=e,this.errorCallback=n,this.missingCallbacks=0,this.isDoneSending=!1,this.isDoingWork=!1,this.callbackReceived=function(){r.missingCallbacks--,r.allSent&&0==r.missingCallbacks&&r.successCallback(r.toReturn)}}return t.prototype.followLink=function(t,e,n){var r=this;this.performingCallback(),XrmQuery.request("GET",t,null,function(t){var i=o(t);j.followLinks(i,e,function(t){n(t),r.callbackReceived()},r.errorCallback)},function(t){r.callbackReceived(),r.errorCallback(t)})},t.prototype.populateRecord=function(t,e){this.performingCallback(),X.followLinks(t,e,this.callbackReceived,this.errorCallback)},t.prototype.allSent=function(){if(!this.isDoingWork)return this.successCallback(this.toReturn);this.isDoneSending=!0},t.prototype.performingCallback=function(){this.missingCallbacks++,this.isDoingWork=!0},t}(),X=function(t){function e(e,n,r,i){var o=t.call(this,e,r,i)||this;return n.forEach(function(t){var n=e[t.linkKey];n&&(delete e[t.linkKey],o.followLink(n,[],function(n){e[t.arrKey]=e[t.arrKey].concat(n)}))}),o.allSent(),o}return __extends(e,t),e.followLinks=function(t,n,r,i){return 0==n.length?r(t):(s(n)&&(n=n.map(function(t){return{arrKey:t,linkKey:t+"@odata.nextLink"}})),new e(t,n,r,i))},e}(N),j=function(t){function e(e,n,r,i){var o=t.call(this,e.value,r,i)||this,s=e["@odata.nextLink"];return s&&o.followLink(s,n,function(t){o.toReturn=o.toReturn.concat(t)}),n.length>0&&e.value.forEach(function(t){return o.populateRecord(t,n)}),o.allSent(),o}return __extends(e,t),e.followLinks=function(t,n,r,i){if(!t["@odata.nextLink"]&&(0==t.value.length||0==n.length))return r(t.value);if(0==n.length)return new e(t,[],r,i);if(s(n)&&(n=n.map(function(t){return{arrKey:t,linkKey:t+"@odata.nextLink"}})),0==t.value.length)return new e(t,n,r,i);var o=t.value[0];return new e(t,n.filter(function(t){return o[t.linkKey]}),r,i)},e}(N),P=function(){function t(t){this.requestType=t,this.additionalHeaders=[],this.getObjectToSend=function(){return null}}return t.prototype.promise=function(){return u(this.execute.bind(this))},t.prototype.execute=function(t,e){void 0===e&&(e=function(){}),this.executeRaw(t,e,!0,!1)},t.prototype.executeSync=function(){var t=Error("Undefined behavior");return this.executeRaw(function(e){t=e},function(e){t=e},!0,!0),t},t.prototype.executeRaw=function(t,e,n,r){var i=this;void 0===e&&(e=function(){}),void 0===n&&(n=!1),void 0===r&&(r=!1);return XrmQuery.sendRequest(this.requestType,this.getQueryString(),this.getObjectToSend(),function(r){return n?i.handleResponse(r,t,e):t(r)},e,function(t){return i.additionalHeaders.forEach(function(e){return t.setRequestHeader(e.type,e.value)})},r)},t}();t.Query=P;var W=function(t){function e(e,n,r){var o=t.call(this,"GET")||this;return o.entitySetName=e,o.id=n,o.relatedNav=r,o.specialQuery=void 0,o.selects=[],o.expands=[],o.expandKeys=[],o.ordering=[],o.skipAmount=null,o.topAmount=null,o.id=void 0!==n?i(n):n,o}return __extends(e,t),e.Get=function(t){return new e(c(t).toString())},e.Related=function(t,n,r){return new e(c(t).toString(),n,c(r).toString())},e.prototype.handleResponse=function(t,e,n){j.followLinks(o(t),this.expandKeys,e,n)},e.prototype.getFirst=function(t,e){this.top(1),this.execute(function(e){return t(e&&e.length>0?e[0]:null)},e)},e.prototype.promiseFirst=function(){return u(this.getFirst.bind(this))},e.prototype.getQueryString=function(){var t=this.entitySetName;if(this.id&&this.relatedNav&&(t+="("+this.id+")/"+this.relatedNav),this.specialQuery)return t+this.specialQuery;var e=[];return this.selects.length>0&&e.push("$select="+this.selects.join(",")),this.expands.length>0&&e.push("$expand="+this.expands.join(",")),this.filters&&e.push("$filter="+this.filters),this.ordering.length>0&&e.push("$orderby="+this.ordering.join(",")),null!=this.skipAmount&&e.push("$skip="+this.skipAmount),null!=this.topAmount&&e.push("$top="+this.topAmount),t+(e.length>0?"?"+e.join("&"):"")},e.prototype.select=function(t){return this.selects=g(t),this},e.prototype.selectMore=function(t){return this.selects=this.selects.concat(g(t)),this},e.prototype.expand=function(t,e){var n=c(t).toString();this.expandKeys.push(n);var r=[];return e&&r.push("$select="+g(e)),this.expands.push(n+(r.length>0?"("+r.join(";")+")":"")),this},e.prototype.filter=function(t){return this.filters=v(t),this},e.prototype.orFilter=function(t){return this.filters?this.filters=Filter.or(this.filters,v(t)):this.filter(t),this},e.prototype.andFilter=function(t){return this.filters?this.filters=Filter.and(this.filters,v(t)):this.filter(t),this},e.prototype.order=function(t,e){return this.ordering.push(v(t)+" "+e),this},e.prototype.orderAsc=function(t){return this.order(t,"asc")},e.prototype.orderDesc=function(t){return this.order(t,"desc")},e.prototype.skip=function(t){return this.skipAmount=t,this},e.prototype.top=function(t){return this.topAmount=t,this},e.prototype.maxPageSize=function(t){return this.additionalHeaders.push(E(t)),this},e.prototype.includeFormattedValues=function(){return this.additionalHeaders.push(b),this},e.prototype.includeFormattedValuesAndLookupProperties=function(){return this.additionalHeaders.push(x),this},e.prototype.useFetchXml=function(t){return this.specialQuery="?fetchXml="+encodeURIComponent(t),this},e.prototype.usePredefinedQuery=function(t,e){return this.specialQuery="?"+t+"="+e,this},e}(P);t.RetrieveMultipleRecords=W;var $=function(t){function e(e,n,r){var o=t.call(this,"GET")||this;return o.entitySetName=e,o.id=n,o.relatedNav=r,o.selects=[],o.expands=[],o.expandKeys=[],o.id=i(n),o}return __extends(e,t),e.Related=function(t,n,r){return new e(c(t).toString(),n,c(r).toString())},e.Get=function(t,n){return new e(c(t).toString(),n)},e.prototype.handleResponse=function(t,e,n){X.followLinks(o(t),this.expandKeys,e,n)},e.prototype.select=function(t){return this.selects=g(t),this},e.prototype.selectMore=function(t){return this.selects=this.selects.concat(g(t)),this},e.prototype.expand=function(t,e,n){var r=c(t).toString();this.expandKeys.push(r);var i=[];return e&&i.push("$select="+g(e)),n&&(n.top&&i.push("$top="+n.top),n.orderBy&&i.push("$orderby="+v(n.orderBy)+" "+(2!=n.sortOrder?"asc":"desc")),n.filter&&i.push("$filter="+v(n.filter))),this.expands.push(r+(i.length>0?"("+i.join(";")+")":"")),this},e.prototype.getQueryString=function(){var t=this.entitySetName+"("+this.id+")",e=[];return this.selects.length>0&&e.push("$select="+this.selects.join(",")),this.expands.length>0&&e.push("$expand="+this.expands.join(",")),this.relatedNav&&(t+="/"+this.relatedNav),t+(e.length>0?"?"+e.join("&"):"")},e.prototype.includeFormattedValues=function(){return this.additionalHeaders.push(b),this},e.prototype.includeFormattedValuesAndLookupProperties=function(){return this.additionalHeaders.push(x),this},e}(P);t.RetrieveRecord=$;var U=function(t){function e(e,n){var r=t.call(this,"POST")||this;return r.record=n,r.getObjectToSend=function(){return JSON.stringify(m(r.record))},r.entitySetName=c(e).toString(),r}return __extends(e,t),e.prototype.handleResponse=function(t,e,n){var r=t.getResponseHeader("OData-EntityId");r?e(r.substr(-37,36)):n(new Error("No valid OData-EntityId found in header."))},e.prototype.setData=function(t){return this.record=t,this},e.prototype.getQueryString=function(){return this.entitySetName},e}(P);t.CreateRecord=U;var F=function(t){function e(e,n){var r=t.call(this,"DELETE")||this;return r.id=n,r.id=void 0!==n?i(n):n,r.entitySetName=c(e).toString(),r}return __extends(e,t),e.prototype.handleResponse=function(t,e){e()},e.prototype.setId=function(t){return this.id=i(t),this},e.prototype.getQueryString=function(){return this.entitySetName+"("+this.id+")"},e}(P);t.DeleteRecord=F;var q=function(t){function e(e,n,r){var o=t.call(this,"PATCH")||this;return o.id=n,o.record=r,o.getObjectToSend=function(){return JSON.stringify(m(o.record))},o.id=void 0!==n?i(n):n,o.entitySetName=c(e).toString(),o}return __extends(e,t),e.prototype.handleResponse=function(t,e){e()},e.prototype.setData=function(t,e){return this.id=i(t),this.record=e,this},e.prototype.getQueryString=function(){return this.entitySetName+"("+this.id+")"},e}(P);t.UpdateRecord=q;var M=function(t){function e(e,n,r,o,s){var u=t.call(this,"PUT")||this;return u.id=n,u.getObjectToSend=function(){return JSON.stringify(m(u.record))},u.entitySetName=c(e).toString(),u.id=void 0!==n?i(n):n,u.entitySetNameTarget=c(r).toString(),u.targetId=void 0!==o?i(o):o,u.relation=c(s).toString(),u.record={},u.record["_id$"+u.entitySetNameTarget]=u.targetId,u}return __extends(e,t),e.prototype.handleResponse=function(t,e){e()},e.prototype.setData=function(t,e){return this.id=i(t),this.record=e,this},e.prototype.getQueryString=function(){return this.entitySetName+"("+this.id+")/"+this.relation+"/$ref"},e}(P);t.AssociateRecordSingle=M;var L=function(t){function e(e,n,r,o,s){var u=t.call(this,"POST")||this;return u.id=n,u.getObjectToSend=function(){return JSON.stringify(m(u.record))},u.entitySetName=c(e).toString(),u.id=void 0!==n?i(n):n,u.entitySetNameTarget=c(r).toString(),u.targetId=void 0!==o?i(o):o,u.relation=c(s).toString(),u.record={},u.record["_id$"+u.entitySetNameTarget]=u.targetId,u}return __extends(e,t),e.prototype.handleResponse=function(t,e){e()},e.prototype.setData=function(t,e){return this.id=i(t),this.record=e,this},e.prototype.getQueryString=function(){return this.entitySetName+"("+this.id+")/"+this.relation+"/$ref"},e}(P);t.AssociateRecordCollection=L;var I=function(t){function e(e,n,r,o){var s=t.call(this,"DELETE")||this;return s.id=n,s.targetid=o,s.entitySetName=e,s.id=void 0!==n?i(n):n,s.relation=r,s.targetId=void 0!==o?i(o):o,s}return __extends(e,t),e.Single=function(t,n,r){return new e(c(t).toString(),n,c(r).toString())},e.Collection=function(t,n,r,i){return new e(c(t).toString(),n,c(r).toString(),i)},e.prototype.handleResponse=function(t,e){e()},e.prototype.setId=function(t){return this.id=i(t),this},e.prototype.getQueryString=function(){return void 0==this.targetId?this.entitySetName+"("+this.id+")/"+this.relation+"/$ref":this.entitySetName+"("+this.id+")/"+this.relation+"("+this.targetId+")/$ref"},e}(P);t.DisassociateRecord=I;var G=/function[^\(]*\(([a-zA-Z0-9_]+)[^\{]*\{([\s\S]*)\}$/m;t.ApiUrl=null;var K="8.0";t.getDefaultUrl=d,t.getApiUrl=function(){return null===t.ApiUrl&&(t.ApiUrl=d(K)),t.ApiUrl}}(XQW||(XQW={}));
